tag=好好学习天天向上
<div id=content class="content mod-cs-content text-content clearfix"> <b>&nbsp; 1&nbsp;</b><b>#include&nbsp;</b><b>&lt;stdio.h&gt;</b><br /><b>&nbsp;&nbsp;2&nbsp;</b><b>#include&nbsp;</b><b>&lt;iostream&gt;</b><br /><b>&nbsp;&nbsp;3&nbsp;</b><b>#include&nbsp;</b><b>&lt;cstring&gt;</b><br /><b>&nbsp;&nbsp;4&nbsp;</b><b>#include&nbsp;</b><b>&lt;vector&gt;</b><br /><b>&nbsp;&nbsp;5&nbsp;</b><b>#include&nbsp;</b><b>&lt;queue&gt;</b><br /><b>&nbsp;&nbsp;6&nbsp;</b><b>#include&nbsp;</b><b>&lt;algorithm&gt;</b><br /><b>&nbsp;&nbsp;7&nbsp;</b><b>#include&nbsp;</b><b>&lt;functional&gt;</b><br /><b>&nbsp;&nbsp;8&nbsp;</b><br /><b>&nbsp;&nbsp;9&nbsp;</b><b>using</b>&nbsp;<b>namespace</b>&nbsp;std<b>;</b><br /><b>&nbsp;10&nbsp;</b><br /><b>&nbsp;11&nbsp;</b><b>typedef</b>&nbsp;<b>char</b>&nbsp;VT<b>;</b><b>//点</b><br /><b>&nbsp;12&nbsp;</b><b>typedef</b>&nbsp;<b>int</b>&nbsp;LT<b>;</b><b>//边</b><br /><b>&nbsp;13&nbsp;</b><br /><b>&nbsp;14&nbsp;</b><b>const</b>&nbsp;VT MAX_VER&nbsp;<b>=</b>&nbsp;<b>50</b><b>;</b><br /><b>&nbsp;15&nbsp;</b><b>const</b>&nbsp;LT MAX_LEN&nbsp;<b>=</b>&nbsp;<b>99999999</b><b>;</b><br /><b>&nbsp;16&nbsp;</b><br /><b>&nbsp;17&nbsp;</b><b>struct</b>&nbsp;Edge<br /><b>&nbsp;18&nbsp;</b><b>{</b><br /><b>&nbsp;19&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;VT to<b>;</b><br /><b>&nbsp;20&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;LT len<b>;</b><br /><b>&nbsp;21&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;Edge<b>*</b>&nbsp;next<b>;</b><br /><b>&nbsp;22&nbsp;</b><br /><b>&nbsp;23&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>Edge</b><b>(</b>VT t&nbsp;<b>=</b>&nbsp;<b>0</b><b>,</b>&nbsp;LT l&nbsp;<b>=</b>&nbsp;<b>0</b><b>,</b>&nbsp;Edge<b>*</b>&nbsp;n&nbsp;<b>=</b>&nbsp;<b>NULL</b><b>)</b><br /><b>&nbsp;24&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>{</b><br /><b>&nbsp;25&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;<b>=</b>&nbsp;t<b>;</b><br /><b>&nbsp;26&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;len&nbsp;<b>=</b>&nbsp;l<b>;</b><br /><b>&nbsp;27&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next&nbsp;<b>=</b>&nbsp;n<b>;</b><br /><b>&nbsp;28&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>}</b><br /><b>&nbsp;29&nbsp;</b><b>}</b><b>;</b><br /><b>&nbsp;30&nbsp;</b><br /><b>&nbsp;31&nbsp;</b><b>struct</b>&nbsp;Path<br /><b>&nbsp;32&nbsp;</b><b>{</b><br /><b>&nbsp;33&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;vector<b>&lt;</b>VT<b>&gt;</b>&nbsp;node<b>;</b><br /><b>&nbsp;34&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;vector<b>&lt;</b>VT<b>&gt;</b>&nbsp;block<b>;</b><br /><b>&nbsp;35&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;LT len<b>;</b><br /><b>&nbsp;36&nbsp;</b><br /><b>&nbsp;37&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>//偏差结点. 前驱节点在第K短树的路径上</b><br /><b>&nbsp;38&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;VT dev<b>;</b><br /><b>&nbsp;39&nbsp;</b><br /><b>&nbsp;40&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>Path</b><b>(</b>VT v&nbsp;<b>=</b>&nbsp;<b>0</b><b>)</b>&nbsp;:&nbsp;<b>node</b><b>()</b><b>,</b>&nbsp;<b>block</b><b>()</b><br /><b>&nbsp;41&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>{</b><br /><b>&nbsp;42&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;node<b>.</b><b>push_back</b><b>(</b>v<b>);</b><br /><b>&nbsp;43&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;len&nbsp;<b>=</b>&nbsp;<b>0</b><b>;</b><br /><b>&nbsp;44&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>}</b><br /><b>&nbsp;45&nbsp;</b><br /><b>&nbsp;46&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>bool</b>&nbsp;<b>operator</b>&nbsp;<b>&gt;</b>&nbsp;<b>(</b><b>const</b>&nbsp;Path<b>&amp;</b>&nbsp;p<b>)</b>&nbsp;<b>const</b><br /><b>&nbsp;47&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>{</b><br /><b>&nbsp;48&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>return</b>&nbsp;len&nbsp;<b>&gt;</b>&nbsp;p<b>.</b>len&nbsp;<b>||</b>&nbsp;len&nbsp;<b>==</b>&nbsp;p<b>.</b>len<br /><b>&nbsp;49&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>&amp;&amp;</b>&nbsp;<b>lexicographical_compare</b><b>(</b><br /><b>&nbsp;50&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; p<b>.</b>node<b>.</b><b>rbegin</b><b>()</b><b>,</b>&nbsp;p<b>.</b>node<b>.</b><b>rend</b><b>()</b><b>,</b><br /><b>&nbsp;51&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; node<b>.</b><b>rbegin</b><b>()</b><b>,</b>&nbsp;node<b>.</b><b>rend</b><b>()</b>&nbsp;<b>);</b><br /><b>&nbsp;52&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>}</b><br /><b>&nbsp;53&nbsp;</b><b>}</b><b>;</b><br /><b>&nbsp;54&nbsp;</b><br /><b>&nbsp;55&nbsp;</b>ostream<b>&amp;</b>&nbsp;<b>operator</b>&nbsp;<b>&lt;&lt;</b>&nbsp;<b>(</b>ostream<b>&amp;</b>&nbsp;os<b>,</b>&nbsp;<b>const</b>&nbsp;Path<b>&amp;</b>&nbsp;p<b>)</b><br /><b>&nbsp;56&nbsp;</b><b>{</b><br /><b>&nbsp;57&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;os&nbsp;<b>&lt;&lt;</b>&nbsp;p<b>.</b>node<b>[</b>&nbsp;p<b>.</b>node<b>.</b><b>size</b><b>()</b>&nbsp;<b>-</b>&nbsp;<b>1</b>&nbsp;<b>]</b>&nbsp;<b>+</b>&nbsp;<b>1</b><b>;</b><br /><b>&nbsp;58&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>for</b>&nbsp;<b>(</b><b>int</b>&nbsp;i&nbsp;<b>=</b>&nbsp;p<b>.</b>node<b>.</b><b>size</b><b>()</b>&nbsp;<b>-</b>&nbsp;<b>2</b><b>;</b>&nbsp;i&nbsp;<b>&gt;=</b>&nbsp;<b>0</b><b>;</b>&nbsp;i<b>--</b><b>)</b><br /><b>&nbsp;59&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>{</b><br /><b>&nbsp;60&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;os&nbsp;<b>&lt;&lt;</b>&nbsp;<b>&quot;-&gt;&quot;</b>&nbsp;<b>&lt;&lt;</b>&nbsp;p<b>.</b>node<b>[</b>i<b>]</b>&nbsp;<b>+</b>&nbsp;<b>1</b><b>;</b><br /><b>&nbsp;61&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>}</b><br /><b>&nbsp;62&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>return</b>&nbsp;os<b>;</b><br /><b>&nbsp;63&nbsp;</b><b>}</b><br /><b>&nbsp;64&nbsp;</b><br /><b>&nbsp;65&nbsp;</b><b>class</b>&nbsp;Graph<br /><b>&nbsp;66&nbsp;</b><b>{</b><br /><b>&nbsp;67&nbsp;</b><b>public</b>:<br /><b>&nbsp;68&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>Graph</b><b>()</b><br /><b>&nbsp;69&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>{</b><br /><b>&nbsp;70&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>memset</b><b>(</b>m_adj<b>,</b>&nbsp;<b>0</b><b>,</b>&nbsp;<b>sizeof</b><b>(</b>m_adj<b>));</b><br /><b>&nbsp;71&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>}</b><br /><b>&nbsp;72&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>~</b><b>Graph</b><b>()</b><br /><b>&nbsp;73&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>{</b><br /><b>&nbsp;74&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>init</b><b>();</b><br /><b>&nbsp;75&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>}</b><br /><b>&nbsp;76&nbsp;</b><br /><b>&nbsp;77&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>//对边的判重</b><br /><b>&nbsp;78&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>void</b>&nbsp;<b>addEdge</b><b>(</b>VT from<b>,</b>&nbsp;VT to<b>,</b>&nbsp;LT len<b>)</b><br /><b>&nbsp;79&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>{</b><br /><b>&nbsp;80&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>if</b>&nbsp;<b>(</b>&nbsp;<b>NULL</b>&nbsp;<b>==</b>&nbsp;m_edge<b>[</b>from<b>][</b>to<b>]</b>&nbsp;<b>)</b><br /><b>&nbsp;81&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>{</b><br /><b>&nbsp;82&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_adj<b>[</b>from<b>]</b>&nbsp;<b>=</b>&nbsp;<b>new</b>&nbsp;<b>Edge</b><b>(</b>to<b>,</b>&nbsp;len<b>,</b>&nbsp;m_adj<b>[</b>from<b>]</b><b>);</b><br /><b>&nbsp;83&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_edge<b>[</b>from<b>][</b>to<b>]</b>&nbsp;<b>=</b>&nbsp;m_adj<b>[</b>from<b>]</b><b>;</b><br /><b>&nbsp;84&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>}</b><br /><b>&nbsp;85&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>}</b><br /><b>&nbsp;86&nbsp;</b><br /><b>&nbsp;87&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>void</b>&nbsp;<b>dijkstra</b><b>()</b><br /><b>&nbsp;88&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>{</b><br /><b>&nbsp;89&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>int</b>&nbsp;minV<b>;</b><br /><b>&nbsp;90&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>for</b>&nbsp;<b>(</b><b>int</b>&nbsp;iter&nbsp;<b>=</b>&nbsp;<b>0</b><b>;</b>&nbsp;iter&nbsp;<b>&lt;</b>&nbsp;m_verCnt<b>;</b>&nbsp;iter<b>++</b><b>)</b><br /><b>&nbsp;91&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>{</b><br /><b>&nbsp;92&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;minV&nbsp;<b>=</b>&nbsp;<b>-</b><b>1</b><b>;</b><br /><b>&nbsp;93&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>for</b>&nbsp;<b>(</b><b>int</b>&nbsp;i&nbsp;<b>=</b>&nbsp;<b>0</b><b>;</b>&nbsp;i&nbsp;<b>&lt;</b>&nbsp;m_verCnt<b>;</b>&nbsp;i<b>++</b><b>)</b><br /><b>&nbsp;94&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>{</b><br /><b>&nbsp;95&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>if</b>&nbsp;<b>(</b><b>!</b>m_visit<b>[</b>i<b>]</b><br /><b>&nbsp;96&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>&amp;&amp;</b>&nbsp;<b>(</b>minV<b>==-</b><b>1</b>&nbsp;<b>||</b>&nbsp;m_sh<b>[</b>i<b>]</b>&nbsp;<b>&lt;</b>&nbsp;m_sh<b>[</b>minV<b>]</b>&nbsp;<b>)</b><br /><b>&nbsp;97&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>)</b><br /><b>&nbsp;98&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>{</b><br /><b>&nbsp;99&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;minV&nbsp;<b>=</b>&nbsp;i<b>;</b><br /><b>100&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>}</b><br /><b>101&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>}</b><br /><b>102&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>if</b>&nbsp;<b>(</b>minV<b>==-</b><b>1</b><b>)</b>&nbsp;&nbsp;<b>break</b><b>;</b><br /><b>103&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_visit<b>[</b>minV<b>]</b>&nbsp;<b>=</b>&nbsp;<b>true</b><b>;</b><br /><b>104&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>for</b>&nbsp;<b>(</b>Edge<b>*</b>&nbsp;adj&nbsp;<b>=</b>&nbsp;m_adj<b>[</b>minV<b>]</b><b>;</b>&nbsp;adj<b>;</b>&nbsp;adj&nbsp;<b>=</b>&nbsp;adj<b>-&gt;</b>next<b>)</b><br /><b>105&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>{</b><br /><b>106&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;VT to&nbsp;<b>=</b>&nbsp;adj<b>-&gt;</b>to<b>;</b><br /><b>107&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>//满足条件 &quot;!m_visit[to]&quot;</b><br /><b>108&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>if</b>&nbsp;<b>(</b><b>!</b>m_visit<b>[</b>to<b>]</b>&nbsp;<b>&amp;&amp;</b>&nbsp;<b>!</b>m_block<b>[</b>minV<b>][</b>to<b>]</b><b>)</b><br /><b>109&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>relax</b><b>(</b>minV<b>,</b>&nbsp;to<b>,</b>&nbsp;adj<b>-&gt;</b>len<b>);</b><br /><b>110&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>}</b><br /><b>111&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>}</b><br /><b>112&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>}</b><br /><b>113&nbsp;</b><br /><b>114&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>void</b>&nbsp;<b>init</b><b>(</b>VT verCnt&nbsp;<b>=</b>&nbsp;MAX_VER<b>)</b><br /><b>115&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>{</b><br /><b>116&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>memset</b><b>(</b>&nbsp;m_edge<b>,</b>&nbsp;<b>0</b><b>,</b>&nbsp;<b>sizeof</b><b>(</b>m_edge<b>)</b>&nbsp;<b>);</b><br /><b>117&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_verCnt&nbsp;<b>=</b>&nbsp;verCnt<b>;</b><br /><b>118&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Edge<b>*</b>&nbsp;p<b>,</b>&nbsp;<b>*</b>temp<b>;</b><br /><b>119&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>for</b>&nbsp;<b>(</b>VT i&nbsp;<b>=</b>&nbsp;<b>0</b><b>;</b>&nbsp;i&nbsp;<b>&lt;</b>&nbsp;m_verCnt<b>;</b>&nbsp;i<b>++</b><b>)</b><br /><b>120&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>{</b><br /><b>121&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;<b>=</b>&nbsp;m_adj<b>[</b>i<b>]</b><b>;</b><br /><b>122&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>while</b>&nbsp;<b>(</b>p<b>)</b><br /><b>123&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>{</b><br /><b>124&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;temp&nbsp;<b>=</b>&nbsp;p<b>;</b><br /><b>125&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;<b>=</b>&nbsp;p<b>-&gt;</b>next<b>;</b><br /><b>126&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>delete</b>&nbsp;temp<b>;</b><br /><b>127&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>}</b><br /><b>128&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_adj<b>[</b>i<b>]</b>&nbsp;<b>=</b>&nbsp;<b>NULL</b><b>;</b><br /><b>129&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>}</b><br /><b>130&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>}</b><br /><b>131&nbsp;</b><br /><b>132&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>//Yen算法求出K短路径，如果有两相同长度的路径，取源节点标号小的为第k短</b><br /><b>133&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;vector<b>&lt;</b>Path<b>&gt;</b>&nbsp;<b>yenLoopless</b><b>(</b>VT source<b>,</b>&nbsp;VT sink<b>,</b>&nbsp;<b>int</b>&nbsp;k<b>)</b><br /><b>134&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>{</b><br /><b>135&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vector<b>&lt;</b>Path<b>&gt;</b>&nbsp;result<b>;</b><br /><b>136&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;priority_queue<b>&lt;</b>&nbsp;Path<b>,</b>&nbsp;vector<b>&lt;</b>Path<b>&gt;,</b>&nbsp;greater<b>&lt;</b>Path<b>&gt;</b>&nbsp;<b>&gt;</b>&nbsp;candidate<b>;</b><br /><b>137&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>memset</b><b>(</b>m_block<b>,</b>&nbsp;<b>0</b><b>,</b>&nbsp;<b>sizeof</b><b>(</b>m_block<b>));</b><br /><b>138&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>initSingleSrc</b><b>(</b>source<b>);</b><br /><b>139&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>dijkstra</b><b>();</b><br /><b>140&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>if</b>&nbsp;<b>(</b>&nbsp;<b>shortest</b><b>(</b>sink<b>)</b>&nbsp;<b>&lt;</b>&nbsp;MAX_LEN&nbsp;<b>)</b><br /><b>141&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>{</b><br /><b>142&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Path sh&nbsp;<b>=</b>&nbsp;<b>shortestPath</b><b>(</b>sink<b>);</b><br /><b>143&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sh<b>.</b>dev&nbsp;<b>=</b>&nbsp;<b>1</b><b>;</b><br /><b>144&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sh<b>.</b>block<b>.</b><b>push_back</b><b>(</b>&nbsp;sh<b>.</b>node<b>[</b>sh<b>.</b>dev<b>]</b>&nbsp;<b>);</b><br /><b>145&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;candidate<b>.</b><b>push</b><b>(</b>sh<b>);</b><br /><b>146&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>}</b><br /><b>147&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>while</b>&nbsp;<b>(</b>&nbsp;result<b>.</b><b>size</b><b>()</b>&nbsp;<b>&lt;</b>&nbsp;k&nbsp;<b>&amp;&amp;</b>&nbsp;<b>!</b>candidate<b>.</b><b>empty</b><b>()</b>&nbsp;<b>)</b><br /><b>148&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>{</b><br /><b>149&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Path p&nbsp;<b>=</b>&nbsp;candidate<b>.</b><b>top</b><b>();</b><br /><b>150&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;candidate<b>.</b><b>pop</b><b>();</b><br /><b>151&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;VT dev&nbsp;<b>=</b>&nbsp;p<b>.</b>dev<b>;</b><br /><b>152&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>while</b>&nbsp;<b>(</b>&nbsp;dev&nbsp;<b>&lt;</b>&nbsp;p<b>.</b>node<b>.</b><b>size</b><b>()</b>&nbsp;<b>)</b><br /><b>153&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>{</b><br /><b>154&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;VT pre&nbsp;<b>=</b>&nbsp;p<b>.</b>node<b>[</b>dev&nbsp;<b>-</b>&nbsp;<b>1</b><b>]</b><b>;</b><br /><b>155&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>if</b>&nbsp;<b>(</b>dev&nbsp;<b>==</b>&nbsp;p<b>.</b>dev<b>)</b><br /><b>156&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>{</b><br /><b>157&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>for</b>&nbsp;<b>(</b><b>int</b>&nbsp;i&nbsp;<b>=</b>&nbsp;<b>0</b><b>;</b>&nbsp;i&nbsp;<b>&lt;</b>&nbsp;p<b>.</b>block<b>.</b><b>size</b><b>();</b>&nbsp;i<b>++</b><b>)</b><br /><b>158&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>{</b><br /><b>159&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_block<b>[</b>pre<b>][</b>&nbsp;p<b>.</b>block<b>[</b>i<b>]</b>&nbsp;<b>]</b>&nbsp;<b>=</b>&nbsp;<b>true</b><b>;</b><br /><b>160&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>}</b><br /><b>161&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>}</b><br /><b>162&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>else</b><br /><b>163&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>{</b><br /><b>164&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_block<b>[</b>pre<b>][</b>&nbsp;p<b>.</b>node<b>[</b>dev<b>]</b>&nbsp;<b>]</b>&nbsp;<b>=</b>&nbsp;<b>true</b><b>;</b><br /><b>165&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>}</b><br /><b>166&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>initSingleSrc</b><b>(</b>source<b>);</b><br /><b>167&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>delSubpath</b><b>(</b>p<b>,</b>&nbsp;dev<b>);</b><br /><b>168&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>dijkstra</b><b>();</b><br /><b>169&nbsp;</b><br /><b>170&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>if</b>&nbsp;<b>(</b><b>shortest</b><b>(</b>sink<b>)</b>&nbsp;<b>&lt;</b>&nbsp;MAX_LEN<b>)</b><br /><b>171&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>{</b><br /><b>172&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Path newP&nbsp;<b>=</b>&nbsp;<b>shortestPath</b><b>(</b>sink<b>);</b><br /><b>173&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;newP<b>.</b>dev&nbsp;<b>=</b>&nbsp;dev<b>;</b><br /><b>174&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>if</b>&nbsp;<b>(</b>dev&nbsp;<b>==</b>&nbsp;p<b>.</b>dev<b>)</b><br /><b>175&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>{</b><br /><b>176&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;newP<b>.</b>block&nbsp;<b>=</b>&nbsp;p<b>.</b>block<b>;</b><br /><b>177&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>}</b><br /><b>178&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>else</b><br /><b>179&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>{</b><br /><b>180&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;newP<b>.</b>block<b>.</b><b>push_back</b><b>(</b>&nbsp;p<b>.</b>node<b>[</b>dev<b>]</b>&nbsp;<b>);</b><br /><b>181&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>}</b><br /><b>182&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;newP<b>.</b>block<b>.</b><b>push_back</b><b>(</b>&nbsp;newP<b>.</b>node<b>[</b>dev<b>]</b>&nbsp;<b>);</b><br /><b>183&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;candidate<b>.</b><b>push</b><b>(</b>newP<b>);</b><br /><b>184&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>}</b><br /><b>185&nbsp;</b><br /><b>186&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dev<b>++</b><b>;</b><br /><b>187&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>}</b><br /><b>188&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>memset</b><b>(</b>m_block<b>,</b>&nbsp;<b>0</b><b>,</b>&nbsp;<b>sizeof</b><b>(</b>m_block<b>));</b><br /><b>189&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;result<b>.</b><b>push_back</b><b>(</b>p<b>);</b><br /><b>190&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>}</b><br /><b>191&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>return</b>&nbsp;result<b>;</b><br /><b>192&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>}</b><br /><b>193&nbsp;</b><br /><b>194&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;Path&nbsp;<b>shortestPath</b><b>(</b>VT v<b>)</b>&nbsp;<b>const</b><br /><b>195&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>{</b><br /><b>196&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Path&nbsp;<b>p</b><b>(</b>v<b>);</b><br /><b>197&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p<b>.</b>len&nbsp;<b>=</b>&nbsp;m_sh<b>[</b>v<b>]</b><b>;</b><br /><b>198&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>for</b>&nbsp;<b>(</b>v&nbsp;<b>=</b>&nbsp;m_pre<b>[</b>v<b>]</b><b>;</b>&nbsp;<b>-</b><b>1</b>&nbsp;<b>!=</b>&nbsp;v<b>;</b>&nbsp;v&nbsp;<b>=</b>&nbsp;m_pre<b>[</b>v<b>]</b><b>)</b><br /><b>199&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>{</b><br /><b>200&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p<b>.</b>node<b>.</b><b>push_back</b><b>(</b>v<b>);</b><br /><b>201&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>}</b><br /><b>202&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>reverse</b><b>(</b>&nbsp;p<b>.</b>node<b>.</b><b>begin</b><b>()</b><b>,</b>&nbsp;p<b>.</b>node<b>.</b><b>end</b><b>()</b>&nbsp;<b>);</b><br /><b>203&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>return</b>&nbsp;p<b>;</b><br /><b>204&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>}</b><br /><b>205&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>//源节点到v的最短路</b><br /><b>206&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;LT&nbsp;<b>shortest</b><b>(</b>VT v<b>)</b>&nbsp;<b>const</b><br /><b>207&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>{</b><br /><b>208&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>return</b>&nbsp;m_sh<b>[</b>v<b>]</b><b>;</b><br /><b>209&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>}</b><br /><b>210&nbsp;</b><br /><b>211&nbsp;</b><b>private</b>:<br /><b>212&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>void</b>&nbsp;<b>delSubpath</b><b>(</b><b>const</b>&nbsp;Path<b>&amp;</b>&nbsp;p<b>,</b>&nbsp;VT dev<b>)</b><br /><b>213&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>{</b><br /><b>214&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;VT pre&nbsp;<b>=</b>&nbsp;p<b>.</b>node<b>[</b><b>0</b><b>]</b><b>;</b><br /><b>215&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_visit<b>[</b>pre<b>]</b>&nbsp;<b>=</b>&nbsp;<b>true</b><b>;</b><br /><b>216&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>int</b>&nbsp;v<b>;</b><br /><b>217&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>for</b>&nbsp;<b>(</b>VT i&nbsp;<b>=</b>&nbsp;<b>1</b><b>;</b>&nbsp;dev&nbsp;<b>!=</b>&nbsp;i<b>;</b>&nbsp;i<b>++</b><b>)</b><br /><b>218&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>{</b><br /><b>219&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v&nbsp;<b>=</b>&nbsp;p<b>.</b>node<b>[</b>i<b>]</b><b>;</b><br /><b>220&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_pre<b>[</b>v<b>]</b>&nbsp;<b>=</b>&nbsp;pre<b>;</b><br /><b>221&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_sh<b>[</b>v<b>]</b>&nbsp;<b>=</b>&nbsp;m_sh<b>[</b>pre<b>]</b>&nbsp;<b>+</b>&nbsp;m_edge<b>[</b>pre<b>][</b>v<b>]-&gt;</b>len<b>;</b><br /><b>222&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_visit<b>[</b>v<b>]</b>&nbsp;<b>=</b>&nbsp;<b>true</b><b>;</b><br /><b>223&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pre&nbsp;<b>=</b>&nbsp;v<b>;</b><br /><b>224&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>}</b><br /><b>225&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_visit<b>[</b>pre<b>]</b>&nbsp;<b>=</b>&nbsp;<b>false</b><b>;</b><br /><b>226&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>}</b><br /><b>227&nbsp;</b><br /><b>228&nbsp;</b><br /><b>229&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>void</b>&nbsp;<b>initSingleSrc</b><b>(</b>VT source<b>)</b>&nbsp;<b>//初始化单源最短路径算法</b><br /><b>230&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>{</b><br /><b>231&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>for</b>&nbsp;<b>(</b>VT i&nbsp;<b>=</b>&nbsp;<b>0</b><b>;</b>&nbsp;i&nbsp;<b>&lt;</b>&nbsp;m_verCnt<b>;</b>&nbsp;i<b>++</b><b>)</b><br /><b>232&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>{</b><br /><b>233&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_sh<b>[</b>i<b>]</b>&nbsp;<b>=</b>&nbsp;MAX_LEN<b>;</b><br /><b>234&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_pre<b>[</b>i<b>]</b>&nbsp;<b>=</b>&nbsp;<b>-</b><b>1</b><b>;</b><br /><b>235&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_visit<b>[</b>i<b>]</b>&nbsp;<b>=</b>&nbsp;<b>false</b><b>;</b><br /><b>236&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>}</b><br /><b>237&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_sh<b>[</b>source<b>]</b>&nbsp;<b>=</b>&nbsp;<b>0</b><b>;</b><br /><b>238&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>}</b><br /><b>239&nbsp;</b><br /><b>240&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>//标记最短路</b><br /><b>241&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>bool</b>&nbsp;<b>relax</b><b>(</b>VT from<b>,</b>&nbsp;VT to<b>,</b>&nbsp;LT len<b>)</b><br /><b>242&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>{</b><br /><b>243&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>if</b>&nbsp;<b>(</b>m_sh<b>[</b>to<b>]</b>&nbsp;<b>&gt;</b>&nbsp;m_sh<b>[</b>from<b>]</b>&nbsp;<b>+</b>&nbsp;len<b>)</b><br /><b>244&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>{</b><br /><b>245&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_sh<b>[</b>to<b>]</b>&nbsp;<b>=</b>&nbsp;m_sh<b>[</b>from<b>]</b>&nbsp;<b>+</b>&nbsp;len<b>;</b><br /><b>246&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_pre<b>[</b>to<b>]</b>&nbsp;<b>=</b>&nbsp;from<b>;</b><br /><b>247&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>return</b>&nbsp;<b>true</b><b>;</b><br /><b>248&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>}</b><br /><b>249&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>//反向第一个标号标号</b><br /><b>250&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>else</b>&nbsp;<b>if</b>&nbsp;<b>(</b>m_sh<b>[</b>to<b>]</b>&nbsp;<b>==</b>&nbsp;m_sh<b>[</b>from<b>]</b>&nbsp;<b>+</b>&nbsp;len&nbsp;<b>&amp;&amp;</b>&nbsp;from&nbsp;<b>&lt;</b>&nbsp;m_pre<b>[</b>to<b>]</b><b>)</b><br /><b>251&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>{</b><br /><b>252&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_pre<b>[</b>to<b>]</b>&nbsp;<b>=</b>&nbsp;from<b>;</b><br /><b>253&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>return</b>&nbsp;<b>true</b><b>;</b><br /><b>254&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>}</b><br /><b>255&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>return</b>&nbsp;<b>false</b><b>;</b><br /><b>256&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>}</b><br /><b>257&nbsp;</b><br /><b>258&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;VT m_verCnt<b>;</b><b>//点的个数.</b><br /><b>259&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;Edge<b>*</b>&nbsp;m_adj<b>[</b>MAX_VER<b>]</b><b>;</b><b>//邻接表.</b><br /><b>260&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;LT m_sh<b>[</b>MAX_VER<b>]</b><b>;</b><b>//存储每个顶点到原点的最短距离。</b><br /><b>261&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;VT m_pre<b>[</b>MAX_VER<b>]</b><b>;</b><b>//存储在最短路径上的顶点。</b><br /><b>262&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;Edge<b>*</b>&nbsp;m_edge<b>[</b>MAX_VER<b>][</b>MAX_VER<b>]</b><b>;</b><br /><b>263&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>bool</b>&nbsp;m_visit<b>[</b>MAX_VER<b>]</b><b>;</b><b>//dijkstra.</b><br /><b>264&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>bool</b>&nbsp;m_block<b>[</b>MAX_VER<b>][</b>MAX_VER<b>]</b><b>;</b><b>//标记是否循环</b><br /><b>265&nbsp;</b><b>}</b><b>;</b><br /><br /> </div>