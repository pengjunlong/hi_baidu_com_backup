---
layout: post
title: php preg_replace 修饰符u的作用
time: 2013-08-06 12:22
keywords: 好好学习天天向上
---
<div id=content class="content mod-cs-content text-content clearfix"> <p style="font-size: 13px; font-family: &#039;Helvetica Neue&#039;,Helvetica,Arial,sans-serif; background-color: #f5f5f5; line-height: 19px;">手册中的解释是</p><p style="font-size: 13px; font-family: &#039;Helvetica Neue&#039;,Helvetica,Arial,sans-serif; background-color: #f5f5f5; line-height: 19px;">”此修正符打开一个与perl不兼容的附加功能. 模式字符串被认为是utf-8的“</p><p style="font-size: 13px; font-family: &#039;Helvetica Neue&#039;,Helvetica,Arial,sans-serif; background-color: #f5f5f5; line-height: 19px;">啥意思呢 个人也不不知道理解的对不对 说说自己的看法</p><p style="font-size: 13px; font-family: &#039;Helvetica Neue&#039;,Helvetica,Arial,sans-serif; background-color: #f5f5f5; line-height: 19px;">utf8 是一种可变长度的编码 一个中文的utf8可能是2个 可能是3个也可能是4个字节长度</p><p style="font-size: 13px; font-family: &#039;Helvetica Neue&#039;,Helvetica,Arial,sans-serif; background-color: #f5f5f5; line-height: 19px;">正式因为这种编码的特殊行 如果你没有告诉php的再处理正则时用的是utf8 php可能自己就乱了 就容易吧中文截断出现乱码</p><p style="font-size: 13px; font-family: &#039;Helvetica Neue&#039;,Helvetica,Arial,sans-serif; background-color: #f5f5f5; line-height: 19px;">如果加上这个参数呢 他会去分析首字节判断出真正的长度 这样就不会乱了</p><pre>test(&#39;/(\D+)(\d+)\w/u&#39;<span>);</span><span>function</span> test(<span>$pre</span><span>){ &nbsp; &nbsp;</span><span>$str</span> = &quot;六角恐龙:12个&quot;<span>; &nbsp; &nbsp;</span><span>$a</span> = <span>preg_replace</span>(<span>$pre</span>, &#39;$1$2条&#39;, <span>$str</span><span>); &nbsp; &nbsp;</span><span>echo</span> <span>$a</span>.&#39;&lt;br/&gt;&#39;<span>;}</span></pre><p style="font-size: 13px; font-family: &#039;Helvetica Neue&#039;,Helvetica,Arial,sans-serif; background-color: #f5f5f5; line-height: 19px;">&nbsp;</p><p style="font-size: 13px; font-family: &#039;Helvetica Neue&#039;,Helvetica,Arial,sans-serif; background-color: #f5f5f5; line-height: 19px;">引用别人的utf8解释：</p><p style="font-size: 13px; font-family: &#039;Helvetica Neue&#039;,Helvetica,Arial,sans-serif; background-color: #f5f5f5; line-height: 19px;">&nbsp;</p><p style=""><span>UTF，是Unicode Text Format的缩写，意为Unicode文本格式。根据Unicode的编码可以生成UTF编码，转换规则如下：<br />(1)首先将Unicode的编码转换成二进制形式，这样一个字符对应一个16位的二进制数。</span></p><p style=""><span>(2)如果Unicode的16位二进制编码的头9位都是0，则用一个字节表示该字符，这个字节的首位是“0”，剩下的7位与原编码中的后7位相同。例如 “\u0034”(0000 0000 0011 0100)，用“34” (0011 0100)表示(与原Unicode编码是相同的，只是去掉了原编码的首字节)；</span></p><p style=""><span><br />(3)如果Unicode的16位二进制编码的头5位都是0， 则用两个字节表示该字符，首字节以“110”开头，该字节后面的5位与源编码中头5个零后面的5位相同；第二个字节以“10”开头，后面的六位则与源编码 中剩下的6位相同。例如“\u025d”(0000 0010 0101 1101)，转化后为“c99d”(1100 1001 1001 1101)；</span></p><p style=""><span><br />(4)如果Unicode的16位二进制编码不符合上述两个规则，则用三个字节表示该字符。第一个字节以“1110”开头，后四位 与源编码的头4位相同；第二个字节以“10”开头，后六位与原编码接下来的6位相同；第三个字节也以“10”开头，后六位与原编码剩下的6位相同，这样原 来16位的编码就转换成三个字节24位的编码了；例如“\u9da7”(1001 1101 1010 0111)，转化为“e9b6a7”(1110 1001 1011 0110 1010 0111)。</span></p><p><br /></p> </div>