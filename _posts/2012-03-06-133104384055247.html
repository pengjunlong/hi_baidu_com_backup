---
layout: post
title: ksp.cpp    K次最短路径续
time: 2012-03-06 22:24
keywords: 好好学习天天向上
---
<div id=content class="content mod-cs-content text-content clearfix"> <p><b>266&nbsp;</b><br /><b>267&nbsp;</b><b>//对于相同长度的路径，我们定义第一个定点最小的那一条为最短</b><br /><b>268&nbsp;</b>Graph g_revGraph<b>;</b><br /><b>269&nbsp;</b><b>int</b>&nbsp;g_k<b>;</b><br /><b>270&nbsp;</b><b>int</b>&nbsp;g_source<b>;</b><br /><b>271&nbsp;</b><b>int</b>&nbsp;g_sink<b>;</b><br /><b>272&nbsp;</b><br /><b>273&nbsp;</b><b>int</b>&nbsp;<b>input</b><b>()</b><br /><b>274&nbsp;</b><b>{</b><br /><b>275&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>int</b>&nbsp;verCnt<b>;</b><br /><b>276&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>int</b>&nbsp;eCnt<b>;</b><br /><b>277&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;cout&nbsp;<b>&lt;&lt;</b>&nbsp;<b>&quot;依次输入点的个数，边的条数，k值，起始点，结点:&quot;</b><b>&lt;&lt;</b>endl<b>;</b><br /><b>278&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;cin&nbsp;<b>&gt;&gt;</b>&nbsp;verCnt&nbsp;<b>&gt;&gt;</b>&nbsp;eCnt&nbsp;<b>&gt;&gt;</b>&nbsp;g_k&nbsp;<b>&gt;&gt;</b>&nbsp;g_source&nbsp;<b>&gt;&gt;</b>&nbsp;g_sink<b>;</b><br /><b>279&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;g_source<b>--</b><b>;</b><br /><b>280&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;g_sink<b>--</b><b>;</b><b>//点是从0到n-1</b><br /><b>281&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>if</b>&nbsp;<b>(</b><b>0</b>&nbsp;<b>==</b>&nbsp;verCnt<b>)</b><br /><b>282&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>{</b><br /><b>283&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>return</b>&nbsp;<b>0</b><b>;</b><br /><b>284&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>}</b><br /><b>285&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;g_revGraph<b>.</b><b>init</b><b>(</b>verCnt<b>);</b><br /><b>286&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>int</b>&nbsp;from<b>,</b>&nbsp;to<b>,</b>&nbsp;len<b>;</b><br /><b>287&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;cout&nbsp;<b>&lt;&lt;</b><b>&quot;输入各条边的起始点，终点，权值:&quot;</b><b>&lt;&lt;</b>endl<b>;</b><br /><b>288&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>for</b>&nbsp;<b>(</b><b>int</b>&nbsp;i&nbsp;<b>=</b>&nbsp;<b>0</b><b>;</b>&nbsp;i&nbsp;<b>&lt;</b>&nbsp;eCnt<b>;</b>&nbsp;i<b>++</b><b>)</b><br /><b>289&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>{</b><br /><b>290&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cin&nbsp;<b>&gt;&gt;</b>&nbsp;from&nbsp;<b>&gt;&gt;</b>&nbsp;to&nbsp;<b>&gt;&gt;</b>&nbsp;len<b>;</b><br /><b>291&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;from<b>--</b><b>;</b><br /><b>292&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to<b>--</b><b>;</b><br /><b>293&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;g_revGraph<b>.</b><b>addEdge</b><b>(</b>to<b>,</b>&nbsp;from<b>,</b>&nbsp;len<b>);</b><b>//反向存储边的方向.</b><br /><b>294&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>}</b><br /><b>295&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>return</b>&nbsp;<b>1</b><b>;</b><br /><b>296&nbsp;</b><b>}</b><br /><b>297&nbsp;</b><br /><b>298&nbsp;</b><b>void</b>&nbsp;<b>solve</b><b>()</b><br /><b>299&nbsp;</b><b>{</b><br /><b>300&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>int</b>&nbsp;k<b>=</b>g_k<b>;</b><br /><b>301&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;vector<b>&lt;</b>Path<b>&gt;</b>&nbsp;kSh&nbsp;<b>=</b>&nbsp;g_revGraph<b>.</b><b>yenLoopless</b><b>(</b>g_sink<b>,</b>&nbsp;g_source<b>,</b>&nbsp;g_k<b>);</b><br /><b>302&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>if</b>&nbsp;<b>(</b>kSh<b>.</b><b>size</b><b>()</b><b>&lt;</b>&nbsp;k<b>)</b><br /><b>303&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>{</b><br /><b>304&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;k<b>=</b>kSh<b>.</b><b>size</b><b>();</b><br /><b>305&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>}</b><br /><b>306&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;cout<b>&lt;&lt;</b><b>&quot;source: &quot;</b><b>&lt;&lt;</b>g_source<b>+</b><b>1</b><b>&lt;&lt;</b><b>&quot;</b><b>\t</b><b>destination: &quot;</b><b>&lt;&lt;</b>g_sink<b>+</b><b>1</b><b>&lt;&lt;</b>endl<b>;</b><br /><b>307&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>for</b>&nbsp;<b>(</b><b>int</b>&nbsp;i&nbsp;<b>=</b>&nbsp;<b>0</b><b>;</b>&nbsp;i&nbsp;<b>&lt;</b>&nbsp;k<b>;</b>&nbsp;i<b>++</b><b>)</b><br /><b>308&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout&nbsp;<b>&lt;&lt;</b><b>&quot;k=&quot;</b><b>&lt;&lt;</b>i<b>+</b><b>1</b><b>&lt;&lt;</b><b>&quot;:</b><b>\t</b><b>&quot;</b><b>&lt;&lt;</b>&nbsp;kSh<b>[</b>i<b>]</b>&nbsp;<b>&lt;&lt;</b>&nbsp;endl<b>;</b><br /><b>309&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>if</b>&nbsp;<b>(</b>g_k<b>&gt;</b>kSh<b>.</b><b>size</b><b>())</b><br /><b>310&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout&nbsp;<b>&lt;&lt;</b><b>&quot;上面已是所有路径，不存在更长的路径&quot;</b><b>&lt;&lt;</b>endl<b>;</b><br /><b>311&nbsp;</b><b>}</b><br /><b>312&nbsp;</b><br /><b>313&nbsp;</b><b>int</b>&nbsp;<b>main</b><b>()</b><br /><b>314&nbsp;</b><b>{</b><br /><b>315&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>char</b>&nbsp;ch<b>;</b><br /><b>316&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>do</b><br /><b>317&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>{</b><br /><b>318&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>input</b><b>();</b><br /><b>319&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>solve</b><b>();</b><br /><b>320&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ch<b>=</b><b>getchar</b><b>();</b><br /><b>321&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout<b>&lt;&lt;</b><b>&quot;Continue? Y or N: &quot;</b><b>;</b><br /><b>322&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cin<b>&gt;&gt;</b>ch<b>;</b><br /><b>323&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>}</b><br /><b>324&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>while</b>&nbsp;<b>(</b>ch<b>==</b><b>'Y'</b>&nbsp;<b>||</b>&nbsp;ch<b>==</b><b>'y'</b><b>);</b><br /><b>325&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>return</b>&nbsp;<b>0</b><b>;</b><br /><b>326&nbsp;</b><b>}</b></p> </div>