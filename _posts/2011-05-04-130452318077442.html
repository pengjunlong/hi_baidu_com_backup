---
layout: post
title: 文本中出现频率最高的n个单词_shell
time: 2011-05-04 23:33
tags: 好好学习天天向上
---

<div id=content class="content mod-cs-content text-content clearfix"> &nbsp;1&nbsp;#!/bin/bash<br />&nbsp;2&nbsp;echo&nbsp;[999]<br />&nbsp;3&nbsp;end=$1<br />&nbsp;4&nbsp;cat&nbsp;$2|<br />&nbsp;5&nbsp;tr&nbsp;-cs&nbsp;&quot;[:alpha:]&quot;&nbsp;&quot;[\012*]&quot;&nbsp;|<br />&nbsp;6&nbsp;tr A-Z a-z|<br />&nbsp;7&nbsp;sort|<br />&nbsp;8&nbsp;uniq&nbsp;-c|<br />&nbsp;9&nbsp;sort&nbsp;-k1nr&nbsp;-k2&nbsp;|<br />10&nbsp;head&nbsp;-n&nbsp;&quot;$end&quot;<br /><p>cool@Linux:~/vim_c$ cat topn.sh<br />#!/bin/bash<br />echo [999]<br />end=$1<br />cat $2|<br />tr -cs &quot;[a-z][A-Z]&quot; &quot;[\012*]&quot; |<br />tr A-Z a-z|<br />sort|<br />uniq -c|<br />sort -k1nr -k2 |<br />head -n &quot;$end&quot;</p>cool@Linux:~/vim_c$ ./topn.sh 10 topn.sh<br />[999]<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2 [<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2 ]<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2 a<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2 end<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2 k<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2 sort<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2 tr<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2 z<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 [a<br /><p><strong>显然，这是不符合要求的，因为tr只支持一部分正则表达式</strong></p><p><strong></strong>cool@Linux:~/vim_c$ cat topn.sh</p>#!/bin/bash<br />echo [999]<br />end=$1<br />cat $2|<br />tr -cs &quot;[:alpha:]&quot; &quot;[\012*]&quot; |<br />tr A-Z a-z|<br />sort|<br />uniq -c|<br />sort -k1nr -k2 |<br />head -n &quot;$end&quot;<br />cool@Linux:~/vim_c$ ./topn.sh 10 topn.sh<br />[999]<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2 a<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2 end<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2 k<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2 sort<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2 tr<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2 z<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 alpha<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 bash<br /><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 bin</p><p><strong>逐行解释一下</strong></p>cool@Linux:~/vim_c$ cat topn.sh|tr -cs &quot;[:alpha:]&quot; &quot;[\012*]&quot;<br />tr -c取补集即非字母的字符，-s删除重复的换行符<br />bin<br />bash<br />echo<br />end<br />cat<br />tr<br />cs<br />alpha<br />tr<br />A<br />Z<br />a<br />z<br />sort<br />uniq<br />c<br />sort<br />k<br />nr<br />k<br />head<br />n<br /><p>end</p>cool@Linux:~/vim_c$ cat topn.sh | tr -cs &quot;[:alpha:]&quot; &quot;[\012*]&quot; | sort <br />排序，以将重复的单词行放在一起<br />a<br />A<br />alpha<br />bash<br />bin<br />c<br />cat<br />cs<br />echo<br />end<br />end<br />head<br />k<br />k<br />n<br />nr<br />sort<br />sort<br />tr<br />tr<br />uniq<br />z<br />Z<br /><p>cool@Linux:~/vim_c$ cat topn.sh | tr -cs &quot;[:alpha:]&quot; &quot;[\012*]&quot; | sort | uniq -c</p><p>prefix lines by the number of occurrences</p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 a<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 A<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 alpha<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 bash<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 bin<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 c<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 cat<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 cs<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 echo<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2 end<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 head<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2 k<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 n<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 nr<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2 sort<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2 tr<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 uniq<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 z<br /><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 Z</p><p>cool@Linux:~/vim_c$ cat topn.sh | tr -cs &quot;[:alpha:]&quot; &quot;[\012*]&quot; | sort | uniq -c | sort -k1nr -k2</p><p>再次排序，先按第一列数字（-n）逆序（-r）排，相同的再参考第二列字母序</p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2 end<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2 k<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2 sort<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2 tr<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 a<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 A<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 alpha<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 bash<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 bin<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 c<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 cat<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 cs<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 echo<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 head<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 n<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 nr<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 uniq<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 z<br /><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 Z</p>cool@Linux:~/vim_c$ cat topn.sh | tr -cs &quot;[:alpha:]&quot; &quot;[\012*]&quot; | sort | uniq -c | sort -k1nr -k2 | head -n 10<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2 end<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2 k<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2 sort<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2 tr<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 a<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 A<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 alpha<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 bash<br /><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 bin</p><p>&nbsp;</p><p><strong>over～</strong></p> </div>