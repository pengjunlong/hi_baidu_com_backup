<h2>好好学习天天向上</h2><br/><h1>腾讯笔试题</h1><hr/>
<div id=content class="content mod-cs-content text-content clearfix"> 一个文件中有40亿个整数，每个整数为四个字节，内存为1GB，写出一个算法：求出这个文件里的整数里不包含的一个整数<br /><br /><br /><br /><br /><br /><br /><br /><br /><br />4个字节表示的整数，总共只有2^32约等于4G个可能。<br />为了简单起见，可以假设都是无符号整数。<br />分配500MB内存，每一bit代表一个整数，刚好可以表示完4个字节的整数，初始值为0。基本思想每读入一个数，就把它对应的bit位置为１，处理完40G个数后，对500M的内存遍历，找出一个bit为0的位，输出对应的整数就是未出现的。<br />算法流程：<br />１）分配５００ＭＢ内存buf，初始化为０<br />２）unsigned int x=0x1;<br />for each int j in file<br />buf=buf|x&lt;&lt;j;<br />end<br />(3) for(unsigned int i=0; i &lt;= 0xffffffff; i++)<br />if (!(buf &amp; x&lt;&lt;i))<br />{<br />output(i);<br />break;<br />}<br />以上只是针对无符号的，有符号的整数可以依此类推。<br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />文件可以分段读啊，这个是O（2n）算法，应该是很快的了，而且空间也允许的。<br />不过还可以构造更快的方法的，更快的方法主要是针对定位输出的整数优化算法。<br />思路大概是这样的，把值空间等分成若干个值段，比如值为无符号数，则<br />00000000H-00000FFFH<br />00001000H-00001FFFH<br />......<br />0000F000H-0000FFFFH<br />.....<br />FFFFF000H-FFFFFFFFH<br />这样可以订立一个规则，在一个值段范围内的数第一次出现时，对应值段指示值Xn=Xn+1，如果该值段的所有整数都出现过，则Xn=1000H，这样后面输出定位时就可以直接跳过这个值段了，因为题目仅仅要求输出一个，这样可以大大减少后面对标志数值的遍历步骤。<br />理论上值段的划分有一定的算法可以快速的实现，比如利用位运算直接定位值段对应值进行计算。 </div>