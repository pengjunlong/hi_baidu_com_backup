---
layout: post
title: Linux shell编程
time: 2011-05-31 21:45
tags: 好好学习天天向上
---

<div id=content class="content mod-cs-content text-content clearfix"> <p>Bourne shell</p><p>C shell</p><p>Korn shell</p><p>bash Bourne Again shell</p><p>~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</p><p>内建命令，外部命令</p><p>内建命令冒号的用法：</p><p>永真</p><p>while :</p><p>清空文件</p><p>:&gt;log</p><p>不做任何事，只做参数展开</p><p>&nbsp;</p><p>圆括号，其中命令运行在子shell中</p><p>(echo &quot;$BASH_SUBSHELL&quot;)</p><p>子shell从父shell中继承：当前工作目录，环境变量，标准输入输出错误，打开的文件标识符，忽略的信号（trap）</p><p>set -C 防止重定向覆盖文件</p><p>set -u 使用未定义变量时，报错并强制退出</p><p>用圆括号创建3个子shell同时执行</p><p>(grep)&amp;</p><p>(grep)&amp;</p><p>(grep)&amp;</p><p>wait 等待后台作业全部完成，才执行下面命令</p><p>set -r shell运行在限制模式</p><p>&nbsp;</p><p>当shell不是内建命令时，linux使用fork对一个子进程执行该命令，fork是一种系统调用（system calls），进程访问硬件的唯一方法</p><p>进程;等待，就绪，运行，处于运行的进程叫作业，作业可包含多个进程，[作业号]进程号</p><p>set -b 当后台运行的作业一完成，shell就提示</p><p>sleep 10 &amp;后台休眠10秒</p><p>fg %n切换到前台，bg切换到后台</p><p>jobs -l显示所有后台运行作业</p><p>disown %- 删除作业</p><p>&nbsp;</p><p>Ctrl+C INT信号，停止作业</p><p>Ctrl+Z TSTP信号，暂时停止，作业转到阻塞</p><p>Ctrl+\ QUIT信号，CtrlC强化版</p><p>Ctrl+Y TSTP信号，进程读取输入时，进入阻塞</p><p>kill %1通过作业号杀死进程</p><p>kill $$ 自杀</p><p>kill -l 列出kill发出的所有信号及其标号</p><p>&nbsp;</p><p>trap &quot;&quot; QUIT</p><p>trap &quot;echo 'you want to kill me'&quot; TERM</p><p>(</p><p>while :</p><p>do</p><p>sleep 6</p><p>done</p><p>)</p><p>kill -3 进程号</p><p>kill 进程号</p><p>~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</p><p>正则表达式</p><p>grep</p><p>sed</p><p>awk编程</p><p>sort，uniq，join，cut，paste，split，tr，tar</p><p>unset清除变量的值</p><p>用:-符号未曾真正赋值，用:=赋值，:?和?测试变量是否赋值</p><p>readonly设置只读变量</p><p>无类型的shell脚本变量，环境变量，</p><p>位置参数，$1,${100},</p><p>$*,$@ 从1开始的全部参数，$#参数数量，$?命令退出状态，$$脚本运行进程号</p><p>双引号，单引号，反引号，反斜线，命令替换，转义</p><p>&nbsp;</p><p>测试</p><p>[ num1 -eq num2 ]</p><p>[ &quot;str2&quot; = &quot;hello&quot; ]</p><p>[ -x&nbsp; file ]</p><p>-a与&nbsp;&nbsp;&nbsp;&nbsp; -o或&nbsp;&nbsp;&nbsp;&nbsp; !非</p><p>if then</p><p>else</p><p>exit 1</p><p>fi</p><p>if/elif/else</p><p>case/in</p><p>运算符，位运算</p><p>for (( 1; 2; 3 ))</p><p>expr命令，bc运算器</p><p>~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</p><p>管道，cat，more，tee</p><p>stdin0，stdout1，stderr2</p><p>n&gt;| filename</p><p>&lt;&lt;delimiter&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; here-document</p><p>exec</p><p>eval</p><p>待续。。。</p> </div>