tag=好好学习天天向上
<div id=content class="content mod-cs-content text-content clearfix"> <p>&nbsp;ps：貌似冬天用不上，如果没暖气的话</p><p>之前用的一些thinkfan之类不够简单，且实际效果并不是很好，于是乎自己做一个傻瓜式的（换掉sleep）<strong></strong>～～</p><p>首先要打开thinpad_acpi的风扇控制支持，具体方法google知道。。。</p>&nbsp;<strong>1&nbsp;</strong><strong>#/bin/bash</strong><br /><strong>&nbsp;2&nbsp;</strong><br /><strong>&nbsp;3&nbsp;</strong><strong>declare</strong><strong>&nbsp;</strong><strong>-i</strong><strong>&nbsp;i</strong><br /><strong>&nbsp;4&nbsp;</strong><strong>declare</strong><strong>&nbsp;</strong><strong>-i</strong><strong>&nbsp;j</strong><br /><strong>&nbsp;5&nbsp;</strong><strong>declare</strong><strong>&nbsp;</strong><strong>-i</strong><strong>&nbsp;level</strong><br /><strong>&nbsp;6&nbsp;</strong><strong>temperature</strong>=<strong>(</strong><strong>41</strong><strong>&nbsp;</strong><strong>43</strong><strong>&nbsp;</strong><strong>47</strong><strong>&nbsp;</strong><strong>53</strong><strong>&nbsp;</strong><strong>59</strong><strong>&nbsp;</strong><strong>61</strong><strong>&nbsp;</strong><strong>67</strong><strong>)</strong><br /><strong>&nbsp;7&nbsp;</strong><strong>i</strong>=<strong>66</strong><br /><strong>&nbsp;8&nbsp;</strong><strong>while&nbsp;</strong><strong>[</strong>&nbsp;<strong>$i</strong>&nbsp;<strong>-ge</strong>&nbsp;<strong>0</strong>&nbsp;<strong>]</strong><br /><strong>&nbsp;9&nbsp;</strong><strong>do</strong><br /><strong>10&nbsp;</strong>&nbsp;&nbsp;&nbsp;&nbsp;<strong>i</strong>=<strong>`sensors&nbsp;</strong><strong>|</strong><strong>&nbsp;</strong><strong>grep</strong><strong>&nbsp;</strong><strong>&quot;</strong><strong>CPU</strong><strong>&quot;</strong><strong>&nbsp;</strong><strong>|</strong><strong>&nbsp;awk&nbsp;</strong><strong>'</strong><strong>{print substr($2,2,2)}</strong><strong>'</strong><strong>`</strong><br /><strong>11&nbsp;</strong>&nbsp;&nbsp;&nbsp;&nbsp;<strong>level</strong>=<strong>0</strong><br /><strong>12&nbsp;</strong>&nbsp;&nbsp;&nbsp;&nbsp;<strong>for&nbsp;</strong><strong>((</strong>j<strong>=</strong><strong>0</strong><strong>;</strong>&nbsp;j<strong>&lt;</strong><strong>7</strong><strong>;</strong>&nbsp;j++<strong>))</strong><br /><strong>13&nbsp;</strong>&nbsp;&nbsp;&nbsp;&nbsp;<strong>do</strong><br /><strong>14&nbsp;</strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>if&nbsp;</strong><strong>[</strong>&nbsp;<strong>$i</strong>&nbsp;<strong>-gt</strong>&nbsp;<strong>${</strong><strong>temperature</strong><strong>[</strong><strong>$j</strong><strong>]</strong><strong>}</strong>&nbsp;<strong>]</strong><br /><strong>15&nbsp;</strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>then</strong><br /><strong>16&nbsp;</strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>level</strong>=<strong>$j</strong><br /><strong>17&nbsp;</strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>fi</strong><br /><strong>18&nbsp;</strong>&nbsp;&nbsp;&nbsp;&nbsp;<strong>done</strong><br /><strong>19&nbsp;</strong>&nbsp;&nbsp;&nbsp;&nbsp;<strong>#echo $level</strong><br /><strong>20&nbsp;</strong>&nbsp;&nbsp;&nbsp;&nbsp;<strong>echo</strong><strong>&nbsp;level&nbsp;</strong><strong>$level</strong><strong>&nbsp;</strong><strong>|</strong>&nbsp;sudo tee /proc/acpi/ibm/fan<br /><strong>21&nbsp;</strong>&nbsp;&nbsp;&nbsp;&nbsp;<strong>sleep</strong>&nbsp;<strong>$((</strong><strong>66</strong><strong>*</strong><strong>(</strong><strong>$level</strong><strong>+</strong><strong>1</strong><strong>)))</strong><br /><strong>22&nbsp;</strong><strong>done</strong><br /><p><strong>23 <br /></strong></p><p>&nbsp;<b>1&nbsp;</b><b>#/bin/bash</b><br /><b>&nbsp;2&nbsp;</b><br /><b>&nbsp;3&nbsp;</b><b>declare</b><b>&nbsp;</b><b>-i</b><b>&nbsp;i</b><br /><b>&nbsp;4&nbsp;</b><b>declare</b><b>&nbsp;</b><b>-i</b><b>&nbsp;j</b><br /><b>&nbsp;5&nbsp;</b><b>declare</b><b>&nbsp;</b><b>-i</b><b>&nbsp;level</b><br /><b>&nbsp;6&nbsp;</b><b>temperature</b>=<b>(</b><b>41</b><b>&nbsp;</b><b>43</b><b>&nbsp;</b><b>47</b><b>&nbsp;</b><b>53</b><b>&nbsp;</b><b>59</b><b>&nbsp;</b><b>61</b><b>&nbsp;</b><b>67</b><b>)</b><br /><b>&nbsp;7&nbsp;</b><b>i</b>=<b>66</b><br /><b>&nbsp;8&nbsp;</b><b>while&nbsp;</b><b>[</b>&nbsp;<b>$i</b>&nbsp;<b>-ge</b>&nbsp;<b>0</b>&nbsp;<b>]</b><br /><b>&nbsp;9&nbsp;</b><b>do</b><br /><b>10&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>i</b>=<b>`sensors&nbsp;</b><b>|</b><b>&nbsp;</b><b>grep</b><b>&nbsp;</b><b>&quot;</b><b>CPU</b><b>&quot;</b><b>&nbsp;</b><b>|</b><b>&nbsp;awk&nbsp;</b><b>'</b><b>{print substr($2,2,2)}</b><b>'</b><b>`</b><br /><b>11&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>level</b>=<b>0</b><br /><b>12&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>for&nbsp;</b><b>((</b>j<b>=</b><b>0</b><b>;</b>&nbsp;j<b>&lt;</b><b>7</b><b>;</b>&nbsp;j++<b>))</b><br /><b>13&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>do</b><br /><b>14&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>if&nbsp;</b><b>[</b>&nbsp;<b>$i</b>&nbsp;<b>-gt</b>&nbsp;<b>${</b><b>temperature</b><b>[</b><b>$j</b><b>]</b><b>}</b>&nbsp;<b>]</b><br /><b>15&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>then</b><br /><b>16&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>level</b>=<b>$j</b><br /><b>17&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>fi</b><br /><b>18&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>done</b><br /><b>19&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>#echo $level</b><br /><b>20&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>echo</b><b>&nbsp;level&nbsp;</b><b>$level</b><b>&nbsp;</b><b>|</b>&nbsp;sudo tee /proc/acpi/ibm/fan<br /><b>21&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;<b>sleep</b>&nbsp;<b>$((</b><b>66</b><b>*</b><b>(</b><b>$level</b><b>+</b><b>1</b><b>)))</b><br /><b>22&nbsp;</b><b>done</b><br /><b>23 </b></p> </div>