---
layout: post
title: 2~~~gedit engdemo.c
time: 2010-12-15 14:13
tags: 好好学习天天向上
---

<div id=content class="content mod-cs-content text-content clearfix"> <p>#include &lt;stdlib.h&gt;<br />#include &lt;stdio.h&gt;<br />#include &lt;string.h&gt;<br />#include &lt;math.h&gt;<br />#include &lt;mysql/mysql.h&gt;<br />#include &quot;engine.h&quot;<br />#define&nbsp; BUFSIZE 1024<br /><br />int main(int argc, char* argv[])<br />{<br />&nbsp;&nbsp;&nbsp; /*printf(&quot;%d-----------%s-&gt;%s\n&quot;,argc,argv[1],argv[2]);*/<br />&nbsp;&nbsp;&nbsp; Engine *ep;<br />&nbsp;&nbsp;&nbsp; MYSQL* mysql;<br />&nbsp;&nbsp;&nbsp; MYSQL_RES *m_res1 = NULL;<br />&nbsp;&nbsp;&nbsp; MYSQL_ROW row1;<br />&nbsp;&nbsp;&nbsp; int T = atoi(argv[3]);<br />&nbsp;&nbsp;&nbsp; int history[7][T] ;<br />&nbsp;&nbsp;&nbsp; int rownum = 6;<br />&nbsp;&nbsp;&nbsp; int colnum = 1;<br />&nbsp;&nbsp;&nbsp; double *pointer;<br />&nbsp;&nbsp;&nbsp; char *curTime = (char*)malloc(30);<br />&nbsp;&nbsp;&nbsp; char *srcID = (char*)malloc(16);<br />&nbsp;&nbsp;&nbsp; char *dstID = (char*)malloc(16);<br />&nbsp;&nbsp;&nbsp; char buff[BUFSIZE] = {'\0'};<br />&nbsp;&nbsp;&nbsp; char *p = (char*) malloc(BUFSIZE);<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; char *temp = (char*) malloc(30);<br /><br />&nbsp;&nbsp;&nbsp; strcpy(srcID, argv[1]);<br />&nbsp;&nbsp;&nbsp; strcpy(dstID, argv[2]);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp; mysql = mysql_init(NULL);<br />&nbsp;&nbsp;&nbsp; if (mysql == NULL)<br />&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; printf(&quot;init failed..&quot;);<br />&nbsp;&nbsp;&nbsp; }<br />&nbsp;&nbsp;&nbsp; if (mysql_real_connect(mysql, &quot;localhost&quot;, &quot;ok&quot;, &quot;ok&quot;, &quot;cognitive&quot;,<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; 0, NULL, 0) == NULL)<br />&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; printf(&quot;%s\n&quot;,mysql_error(mysql));<br />&nbsp;&nbsp;&nbsp; }<br />&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; snprintf(buff, sizeof(buff), &quot;select ADDTIME(A.max_elm, '00:01:00')&gt;B.max_real, A.max_elm, B.max_real from (select MAX(elm_predict_history.dateTime) as max_elm from&nbsp; elm_predict_history WHERE (`srcID`='%s' and `dstID`='%s')) A,(select MAX(realtime_history.dateTime) as max_real from&nbsp; realtime_history WHERE (`srcID`='%s' and `dstID`='%s')) B;&quot;, <br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; srcID, dstID, srcID, dstID);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mysql_query(mysql,buff);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; m_res1 = mysql_store_result(mysql);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; while ((row1 = mysql_fetch_row(m_res1)) !=NULL)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (atoi(row1[0]) == 1)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; strcpy(curTime, row1[1]);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; else<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; strcpy(curTime, row1[2]);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; printf(&quot;curTime= %s\n&quot;, curTime);<br /><br />&nbsp;&nbsp;&nbsp; snprintf(buff, sizeof(buff), &quot;SELECT * FROM `realtime_history`&quot;<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &quot; WHERE (`srcID`='%s' and `dstID`='%s') and dateTime&lt;=ADDTIME('%s','00:00:05') &quot;<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &quot;order by dateTime desc limit 0,%d&quot;,<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; srcID, dstID, curTime, 7*T);<br />&nbsp;&nbsp;&nbsp; mysql_query(mysql,buff);<br />&nbsp;&nbsp;&nbsp; m_res1 = mysql_store_result(mysql);<br />&nbsp;&nbsp;&nbsp; while ((row1 = mysql_fetch_row(m_res1)) !=NULL)<br />&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; history[rownum][T-colnum] = atoi(row1[2]);<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if (rownum==6 &amp;&amp; colnum==1)&nbsp;&nbsp;&nbsp; strcpy(curTime, row1[10]);<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if (colnum &lt; T)<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; colnum++;<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; else<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; colnum = 1;<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; rownum--;<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br />&nbsp;&nbsp;&nbsp; }<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp; ep = engOpen(NULL);<br />&nbsp;&nbsp;&nbsp; engSetVisible(ep, 0);<br />&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp; strcpy(p,&quot;p=[&quot;);<br />&nbsp;&nbsp;&nbsp; for(rownum=1; rownum&lt;=3; rownum++)<br />&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; for(colnum=0; colnum&lt;T; colnum++)<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; sprintf(temp, &quot;%d&quot;, history[rownum][colnum]);<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; strcat(p, temp);<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; strcat(p, &quot; &quot;);<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; for(colnum=0; colnum&lt;T; colnum++)<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; sprintf(temp, &quot;%d&quot;, history[rownum+1][colnum]);<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; strcat(p, temp);<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; strcat(p, &quot; &quot;);<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; for(colnum=0; colnum&lt;T; colnum++)<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; sprintf(temp, &quot;%d&quot;, history[rownum+2][colnum]);<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; strcat(p, temp);<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; strcat(p, &quot; &quot;);<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; strcat(p, &quot;;&quot;);<br />&nbsp;&nbsp;&nbsp; }<br />&nbsp;&nbsp;&nbsp; strcat(p, &quot;];&quot;);<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; engEvalString(ep,p);<br /><br />&nbsp;&nbsp;&nbsp; strcpy(p,&quot;t=[&quot;);<br />&nbsp;&nbsp;&nbsp; for(rownum=4; rownum&lt;=4; rownum++)<br />&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; for(colnum=0; colnum&lt;T; colnum++)<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; sprintf(temp, &quot;%d&quot;, history[rownum][colnum]);<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; strcat(p, temp);<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; strcat(p, &quot; &quot;);<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; for(colnum=0; colnum&lt;T; colnum++)<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; sprintf(temp, &quot;%d&quot;, history[rownum+1][colnum]);<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; strcat(p, temp);<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; strcat(p, &quot; &quot;);<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; for(colnum=0; colnum&lt;T; colnum++)<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; sprintf(temp, &quot;%d&quot;, history[rownum+2][colnum]);<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; strcat(p, temp);<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; strcat(p, &quot; &quot;);<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; strcat(p, &quot;;&quot;);<br />&nbsp;&nbsp;&nbsp; }<br />&nbsp;&nbsp;&nbsp; strcat(p, &quot;];&quot;);<br />&nbsp;&nbsp;&nbsp; engEvalString(ep,p);<br /><br />&nbsp;&nbsp;&nbsp; strcpy(p,&quot;p1=[&quot;);<br />&nbsp;&nbsp;&nbsp; for(rownum=4; rownum&lt;=6; rownum++)<br />&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; for(colnum=0; colnum&lt;T; colnum++)<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; sprintf(temp, &quot;%d&quot;, history[rownum][colnum]);<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; strcat(p, temp);<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; strcat(p, &quot; &quot;);<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; strcat(p, &quot;;&quot;);<br />&nbsp;&nbsp;&nbsp; }<br />&nbsp;&nbsp;&nbsp; strcat(p, &quot;];&quot;);<br />&nbsp;&nbsp;&nbsp; engEvalString(ep,p);<br /><br />&nbsp;&nbsp;&nbsp; /*strcpy(p,&quot;t1=[&quot;);<br />&nbsp;&nbsp;&nbsp; for(rownum=6; rownum&lt;7; rownum++)<br />&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; for(colnum=0; colnum&lt;T; colnum++)<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; sprintf(temp, &quot;%d&quot;, history[rownum][colnum]);<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; strcat(p, temp);<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; strcat(p, &quot; &quot;);<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; strcat(p, &quot;;&quot;);<br />&nbsp;&nbsp;&nbsp; }<br />&nbsp;&nbsp;&nbsp; strcat(p, &quot;];&quot;);<br />&nbsp;&nbsp;&nbsp; engEvalString(ep,p);*/<br /><br />&nbsp;&nbsp;&nbsp; engEvalString(ep, &quot;[pn,settings_p] = mapminmax(p);&quot;<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &quot;[tn,settings_t] = mapminmax(t);&quot;<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &quot;net=newelm(pn, tn, 25);&quot;<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &quot;net.trainparam.show=100;&quot;<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &quot;net.trainparam.epochs=3000;&quot;<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &quot;net.trainparam.goal=0.0001;&quot;<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &quot;net=init(net);&quot;<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &quot;net=train(net,pn,tn);&quot;<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &quot;pn2 = mapminmax('apply',p1,settings_p) ;&quot;<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &quot;tn2=sim(net,pn2);&quot;<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &quot;t2 = mapminmax('reverse',tn2,settings_t);&quot;/*<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &quot;E = t1 - t2;&quot;<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &quot;MSE=mse(E);&quot;*/);<br />&nbsp;&nbsp;&nbsp; /*sprintf(temp, &quot;%d&quot;, T);<br />&nbsp;&nbsp;&nbsp; strcpy(p, &quot;figure(1);&quot;);<br />&nbsp;&nbsp;&nbsp; strcat(p, &quot;X=1:&quot;);<br />&nbsp;&nbsp;&nbsp; strcat(p, temp);<br />&nbsp;&nbsp;&nbsp; strcat(p, &quot;;&quot;<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &quot;plot(X,t2,'r*',X,t1,'bo');&quot;<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &quot;title('o-blue:realtime&#161;ê?*-red:predict');&quot;);<br />&nbsp;&nbsp;&nbsp; engEvalString(ep, p);*/<br />&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp; pointer = mxGetPr(engGetVariable(ep, &quot;t2&quot;)); <br />&nbsp;&nbsp;&nbsp; for(colnum=0; colnum&lt;T; colnum++)<br />&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; strcpy(p, &quot;00:&quot;);<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; printf(&quot;%f\n&quot;, pointer[colnum]);<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; sprintf(temp, &quot;%d&quot;, (colnum+1)/2);<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; strcat(p, &quot;0&quot;);<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; strcat(p, temp);<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if (colnum%2 == 0)<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; strcat(p, &quot;:30&quot;);<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; else<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; strcat(p, &quot;:00&quot;);<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; snprintf(buff, sizeof(buff), &quot;insert into&nbsp; `elm_predict_history`(srcID, dstID, bandwidth, dateTime) &quot;<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &quot; values('%s',&nbsp; '%s', %f, ADDTIME('%s', '%s'))&quot;,srcID, dstID, pointer[colnum], curTime, p);<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; mysql_query(mysql,buff);<br />&nbsp;&nbsp;&nbsp; &nbsp;} <br />&nbsp;&nbsp;&nbsp; /*int done;<br />&nbsp;&nbsp;&nbsp; scanf(&quot;%d&quot;, &amp;done);<br />&nbsp;&nbsp;&nbsp; printf(&quot;Done!\n&quot;);*/<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; free(curTime);<br />&nbsp;&nbsp;&nbsp; free(srcID);<br />&nbsp;&nbsp;&nbsp; free(dstID);<br />&nbsp;&nbsp;&nbsp; free(p);<br />&nbsp;&nbsp;&nbsp; free(temp);<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; mysql_close(mysql);<br />&nbsp;&nbsp;&nbsp; engClose(ep);<br />&nbsp;&nbsp;&nbsp; return EXIT_SUCCESS;<br />}</p> </div>