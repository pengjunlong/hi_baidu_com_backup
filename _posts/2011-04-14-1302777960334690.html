---
layout: post
title: ubuntu壁纸自动换
time: 2011-04-14 18:46
tags: 好好学习天天向上
---

<div id=content class="content mod-cs-content text-content clearfix"> <p>Wallpaper/backgroud.py.html</p><p>&nbsp;1 #!/usr/bin/env python<br />&nbsp;2 #coding=utf-8<br />&nbsp;3 import&nbsp;glob, os<br />&nbsp;4 import&nbsp;shutil<br />&nbsp;5 import&nbsp;time<br />&nbsp;6 import&nbsp;Image<br />&nbsp;7 <br />&nbsp;8 filelist=[]<br />&nbsp;9 def&nbsp;filelie(path):<br />10 &nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;os.path.isfile(path):<br />11 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; wenjian=os.path.splitext(path)[1][1:]<br />12 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if&nbsp;wenjian==&quot;jpg&quot;&nbsp;or&nbsp;wenjian==&quot;png&quot;&nbsp;or&nbsp;wenjian==&quot;gif&quot;:<br />13 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try:<br />14 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;width,height = Image.open(path).size<br />15 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;width&gt;=1024&nbsp;and&nbsp;height&gt;=768:<br />16 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;filelist.append(path)<br />17 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;except&nbsp;IOError:<br />18 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; pass<br />19 &nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;os.path.isdir(path):<br />20 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;item in&nbsp;os.listdir(path):<br />21 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;itemsrc = os.path.join(path, item)<br />22 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;filelie(itemsrc)<br />23 <br />24 curdir = os.getcwd()<br />25 filelie(curdir)<br />26 currentImageFiles = filelist<br />27 #print filelist<br />28 if&nbsp;os.path.isfile('backgroundslide.xml'):<br />29 &nbsp;os.remove('backgroundslide.xml')<br />30 <br />31 <br />32 currentTime = time.localtime()<br />33 length = len(currentImageFiles)<br />34 <br />35 f = file('backgroundslide.xml', 'w')<br />36 <br />37 f.write('&lt;background&gt;\n')<br />38 f.write('\t&lt;starttime&gt;\n')<br />39 f.write('\t\t&lt;year&gt;'&nbsp;+ str(currentTime.tm_year) + '&lt;/year&gt;\n')<br />40 f.write('\t\t&lt;month&gt;'&nbsp;+ str(currentTime.tm_mon) + '&lt;/month&gt;\n')<br />41 f.write('\t\t&lt;day&gt;'&nbsp;+ str(currentTime.tm_mday) + '&lt;/day&gt;\n')<br />42 f.write('\t\t&lt;hour&gt;'&nbsp;+ str(currentTime.tm_hour) + '&lt;/hour&gt;\n')<br />43 f.write('\t\t&lt;minute&gt;'&nbsp;+ str(currentTime.tm_min) + '&lt;/minute&gt;\n')<br />44 f.write('\t\t&lt;second&gt;'&nbsp;+ str(currentTime.tm_sec) + '&lt;/second&gt;\n')<br />45 f.write('\t&lt;/starttime&gt;\n')<br />46 f.write('&lt;!--This animation will start at the time it created--&gt;\n')<br />47 <br />48 for&nbsp;i in&nbsp;currentImageFiles:<br />49 &nbsp;length = length - 1<br />50 &nbsp;f.write('\t&lt;static&gt;\n')<br />51 &nbsp;f.write('\t\t&lt;duration&gt;60.0&lt;/duration&gt;\n')<br />52 &nbsp;f.write('\t\t&lt;file&gt;'&nbsp;+ currentImageFiles[length] +'&lt;/file&gt;\n')<br />53 &nbsp;f.write('\t&lt;/static&gt;\n')<br />54 &nbsp;f.write('\t&lt;transition&gt;\n')<br />55 &nbsp;f.write('\t\t&lt;duration&gt;5.0&lt;/duration&gt;\n')<br />56 &nbsp;f.write('\t\t&lt;from&gt;'&nbsp;+ currentImageFiles[length] + '&lt;/from&gt;\n')<br />57 &nbsp;if&nbsp;length &gt;= 1:<br />58 &nbsp;&nbsp;f.write('\t\t&lt;to&gt;'&nbsp;+ currentImageFiles[length-1] + '&lt;/to&gt;\n')<br />59 &nbsp;if&nbsp;length &lt;1:<br />60 &nbsp;&nbsp;f.write('\t\t&lt;to&gt;'&nbsp;+ currentImageFiles[len(currentImageFiles)-1] + '&lt;/to&gt;\n')<br />61 &nbsp;f.write('\t&lt;/transition&gt;\n')<br />62 <br />63 f.write('&lt;/background&gt;\n')<br />64 f.close()<br /></p> </div>