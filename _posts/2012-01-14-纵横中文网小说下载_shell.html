<h2>好好学习天天向上</h2><br/><h1>纵横中文网小说下载_shell</h1><hr/>
<div id=content class="content mod-cs-content text-content clearfix"> <p>&nbsp;<b>1&nbsp;</b><b>#!/bin/bash</b><br /><b>&nbsp;2&nbsp;</b><br /><b>&nbsp;3&nbsp;</b><b>if&nbsp;</b><b>[</b>&nbsp;<b>$#</b>&nbsp;<b>-lt</b>&nbsp;<b>4</b>&nbsp;<b>]</b><br /><b>&nbsp;4&nbsp;</b><b>then</b><br /><b>&nbsp;5&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>echo</b><b>&nbsp;</b><b>&quot;</b><b>./x.sh urlnum begin end novel.txt</b><b>&quot;</b><br /><b>&nbsp;6&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>exit</b><br /><b>&nbsp;7&nbsp;</b><b>fi</b><br /><b>&nbsp;8&nbsp;</b><b>mkdir</b>&nbsp;ko<br /><b>&nbsp;9&nbsp;</b><b>cd</b>&nbsp;ko<br /><b>10&nbsp;</b>wget <a href="http://book.zongheng.com/showchapter/">http://book.zongheng.com/showchapter/</a><b>$1</b>.html&nbsp;<b>-O</b>&nbsp;index.html<br /><b>11&nbsp;</b><br /><b>12&nbsp;</b>cat index.html |&nbsp;<b>grep</b>&nbsp;<b>&quot;</b><b>$1</b><b>/[0-9]*.html</b><b>&quot;</b>&nbsp;| awk&nbsp;<b>-F</b><b>'</b><b>&quot;</b><b>'</b>&nbsp;<b>'</b><b>{print $2}</b><b>'</b>&nbsp;|&nbsp;<b>sort</b>&nbsp;<b>&gt;</b>url<br /><b>13&nbsp;</b><b>rm</b>&nbsp;index.html<br /><b>14&nbsp;</b><b>declare</b><b>&nbsp;</b><b>-i</b><b>&nbsp;begin</b><br /><b>15&nbsp;</b><b>declare</b><b>&nbsp;</b><b>-i</b><b>&nbsp;end</b><br /><b>16&nbsp;</b><b>begin</b>=<b>`</b><b>grep</b><b>&nbsp;-n&nbsp;</b><b>$2</b><b>&nbsp;url&nbsp;</b><b>|</b><b>&nbsp;</b><b>tail</b><b>&nbsp;-n&nbsp;</b><b>1</b><b>&nbsp;</b><b>|</b><b>&nbsp;awk -F:&nbsp;</b><b>'</b><b>{print $1}</b><b>'</b><b>`</b><br /><b>17&nbsp;</b><b>end</b>=<b>`</b><b>grep</b><b>&nbsp;-n&nbsp;</b><b>$3</b><b>&nbsp;url&nbsp;</b><b>|</b><b>&nbsp;</b><b>tail</b><b>&nbsp;-n&nbsp;</b><b>1</b><b>&nbsp;</b><b>|</b><b>&nbsp;awk -F:&nbsp;</b><b>'</b><b>{print $1}</b><b>'</b><b>`</b><br /><b>18&nbsp;</b><b>echo</b><b>&nbsp;</b><b>$begin</b><br /><b>19&nbsp;</b><b>echo</b><b>&nbsp;</b><b>$end</b><br /><b>20&nbsp;</b><b>sed</b>&nbsp;<b>-n</b>&nbsp;<b>-e</b>&nbsp;<b>&quot;</b><b>${</b><b>begin</b><b>}</b><b>,</b><b>${</b><b>end</b><b>}</b><b>p</b><b>&quot;</b>&nbsp;url&nbsp;<b>&gt;&gt;</b>real_url<br /><b>21&nbsp;</b><b>rm</b>&nbsp;url<br /><b>22&nbsp;</b><br /><b>23&nbsp;</b><b>mkdir</b>&nbsp;waok<br /><b>24&nbsp;</b><b>cd</b>&nbsp;waok<br /><b>25&nbsp;</b><b>for&nbsp;</b>a&nbsp;<b>in</b>&nbsp;<b>$(</b><b>cat ../real_url</b><b>)</b>&nbsp;<br /><b>26&nbsp;</b><b>do</b>&nbsp;<br /><b>27&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wget&nbsp;<b>$a</b>&nbsp;<br /><b>28&nbsp;</b><b>done</b><br /><b>29&nbsp;</b><b>rm</b>&nbsp;../real_url<br /><b>30&nbsp;</b><br /><b>31&nbsp;</b><b>for&nbsp;</b>file&nbsp;<b>in</b>&nbsp;<b>`</b><b>find</b><b>&nbsp;-name&nbsp;</b><b>&quot;</b><b>*.html</b><b>&quot;</b><b>`</b>&nbsp;<br /><b>32&nbsp;</b><b>do</b>&nbsp;<br /><b>33&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cat&nbsp;<b>$file</b>&nbsp;<b>|</b>&nbsp;<b>sed</b>&nbsp;<b>-n</b>&nbsp;<b>'</b><b>/&lt;div id=&quot;readtext&quot;.*&gt;/,/&lt;\/div/{/div/!p}</b><b>'</b>&nbsp;<b>&gt;&gt;</b><b>&quot;</b><b>$file</b><b>.txt</b><b>&quot;</b>&nbsp;<br /><b>34&nbsp;</b><b>done</b><br /><b>35&nbsp;</b><b>rm</b>&nbsp;*.html<br /><b>36&nbsp;</b><b>for&nbsp;</b>file&nbsp;<b>in</b>&nbsp;<b>`</b><b>find</b><b>&nbsp;-name&nbsp;</b><b>&quot;</b><b>*.txt</b><b>&quot;</b><b>&nbsp;</b><b>|</b><b>&nbsp;</b><b>sort</b><b>`</b><br /><b>37&nbsp;</b><b>do</b>&nbsp;<br /><b>38&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vim&nbsp;<b>-c</b>&nbsp;<b>&quot;</b><b>1,5d</b><b>&quot;</b>&nbsp;<b>-c</b>&nbsp;<b>&quot;</b><b>2,</b><b>$d</b><b>&quot;</b>&nbsp;<b>-c</b>&nbsp;<b>&quot;</b><b>wq</b><b>&quot;</b>&nbsp;<b>$file</b><br /><b>39&nbsp;</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cat&nbsp;<b>$file</b>&nbsp;<b>&gt;&gt;</b>t&nbsp;<br /><b>40&nbsp;</b><b>done</b><br /><b>41&nbsp;</b>iconv&nbsp;<b>-f</b>&nbsp;utf8&nbsp;<b>-t</b>&nbsp;cp936 t&nbsp;<b>&gt;</b>tt<br /><b>42&nbsp;</b>vim&nbsp;<b>-c</b>&nbsp;<b>&quot;</b><b>%s/&lt;p&gt;//g</b><b>&quot;</b>&nbsp;<b>-c</b>&nbsp;<b>&quot;</b><b>%s#&lt;/p&gt;#</b><b>\r</b><b>#g</b><b>&quot;</b>&nbsp;<b>-c</b>&nbsp;<b>&quot;</b><b>%s#&lt;span.*&lt;/span&gt;##g</b><b>&quot;</b>&nbsp;<b>-c</b>&nbsp;<b>&quot;</b><b>%s/&lt;!--.*--&gt;//g</b><b>&quot;</b>&nbsp;<b>-c</b>&nbsp;<b>&quot;</b><b>set fileformat=dos</b><b>&quot;</b>&nbsp;<b>-c</b>&nbsp;<b>&quot;</b><b>wq</b><b>&quot;</b>&nbsp;tt<br /><b>43&nbsp;</b><b>mv</b>&nbsp;tt ~/<b>$4</b><br /><b>44&nbsp;</b><b>cd</b>&nbsp;../../<br /><b>45&nbsp;</b><b>rm</b>&nbsp;<b>-rf</b>&nbsp;ko</p> </div>