---
layout: post
title: shell的字符串处理太混乱了
time: 2011-08-14 14:32
tags: 好好学习天天向上
---

<div id=content class="content mod-cs-content text-content clearfix"> <p>root@pjl:~# string=&quot;hello world&quot;</p><p>root@pjl:~# echo ${#string}</p><p>11</p><p>root@pjl:~# expr length $string</p><p>expr: syntax error</p><p>root@pjl:~# echo `expr length $string`</p><p>expr: syntax error</p><p>&nbsp;</p><p>root@pjl:~# echo ` expr length $string `</p><p>expr: syntax error</p><p>&nbsp;</p><p>root@pjl:~# echo ` expr 1 + 1 `</p><p>2</p><p>root@pjl:~# echo `expr 1 + 1`</p><p>2</p><p>root@pjl:~# echo `expr length $string`</p><p>expr: syntax error</p><p>&nbsp;</p><p>root@pjl:~# echo ${#string}</p><p>11</p><p>root@pjl:~# cat filename.sh</p><p>#!/bin/bash</p><p>OPERATION=echo</p><p>SUFFIX=fdp</p><p>&nbsp;</p><p>if [ -n $1 ]</p><p>then</p><p> directory=$1</p><p>else</p><p> directory=$PWD</p><p>fi</p><p>&nbsp;</p><p>for file in $directory/*.pdf</p><p>do</p><p> filename=${file%.*f}</p><p> $OPERATION &quot;$filename.$SUFFIX&quot;</p><p> echo &nbsp;&quot;$SECONDS seconds&quot;</p><p>done</p><p>&nbsp;</p><p>exit 0</p><p>root@pjl:~# vim minlen.sh</p><p>root@pjl:~# chmod +x minlen.sh&nbsp;</p><p>root@pjl:~# ./minlen.sh &lt;filename.sh</p><p>#!/bin/bash</p><p>OPERATION=echo</p><p>SUFFIX=fdp</p><p>&nbsp;</p><p>&nbsp;</p><p>if [ -n $1 ]</p><p>then</p><p>&nbsp;</p><p>directory=$1</p><p>else</p><p>&nbsp;</p><p>directory=$PWD</p><p>fi</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>for file in $directory/*.pdf</p><p>do</p><p>&nbsp;</p><p>filename=${file%.*f}</p><p>$OPERATION &quot;$filename.$SUFFIX&quot;</p><p>echo &quot;$SECONDS seconds&quot;</p><p>done</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>exit 0</p><p>&nbsp;</p><p>root@pjl:~# echo `expr match &quot;abcABC123&quot; 'abc[A-Z]*.2'`</p><p>8</p><p>root@pjl:~# echo `expr match &quot;abcABC123&quot; 'abd'`</p><p>0</p><p>root@pjl:~# echo `expr match &quot;abcABC123&quot; 'abc[A-Z]*'`</p><p>6</p><p>root@pjl:~# echo `expr index &quot;abcABC123&quot; 'abc[A-Z]*'`</p><p>1</p><p>root@pjl:~# echo $string</p><p>hello world</p><p>root@pjl:~# echo ${string:2:3}</p><p>llo</p><p>root@pjl:~# echo ${string:0:3}</p><p>hel</p><p>root@pjl:~# echo ${string:2}</p><p>llo world</p><p>root@pjl:~# echo `expr index &quot;$string&quot; 'w'`</p><p>7</p><p>root@pjl:~# pos=`expr index &quot;$string&quot; 'w'`</p><p>root@pjl:~# echo $pos</p><p>7</p><p>root@pjl:~# echo ${string:$pos:5}</p><p>orld</p><p>root@pjl:~# echo ${string:(($pos-1)):5}</p><p>world</p><p>root@pjl:~#&nbsp;</p><br /><p></p> </div>