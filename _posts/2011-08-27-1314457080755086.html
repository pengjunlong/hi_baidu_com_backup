---
layout: post
title: ubuntu无法从休眠挂起恢复No suspend with Virtualbox 4.1.0
time: 2011-08-27 22:58
keywords: 好好学习天天向上
---
<div id=content class="content mod-cs-content text-content clearfix"> <p>Virtualbox 4.1 (vboxdrv) Blocks Machine Suspend</p><p>没安装virtualbox前ubuntu可以正常挂起，但安装后不能正常挂起，且挂起后黑屏无法恢复，只能强行重启</p><p>解决方法：</p><p>在/etc/pm/config.d/unload_modules中加入</p><p>SUSPEND_MODULES=&quot;$SUSPEND_MODULES vboxdrv vboxnetflt vboxnetadp vboxpci&quot;</p><p><br /></p><p><br /></p><p><strong>相关资料</strong><br /></p><p>Since I upgraded to VirtualBox 4.1.0 on my 11.04 I'm having a problem of suspending. This is a <a href="http://www.virtualbox.org/ticket/9260" rel="nofollow">known bug</a> and some suggested a workaround by adding the vboxdrv to the modules under /etc/pm/config.d/unload_modules. This indeed solved the problem but only when a VM image is not running.</p><a href="http://www.virtualbox.org/ticket/9260" target="_blank">This one </a> is a VirtualBox problem ticket discussion, in which some enterprising soul offers the following workaround:<br /><p>&quot;Adding the following line in /etc/pm/config.d/unload_modules fixes the problem for me:</p><p></p> Code: SUSPEND_MODULES=&quot;$SUSPEND_MODULES vboxdrv vboxnetflt vboxnetadp vboxpci&quot;<p>&nbsp;</p>        <ul><li>        <a href="https://bugs.launchpad.net/ubuntu/+source/virtualbox/+bug/814323/+attachment/2242019/+files/vboxhost-fix-panic.patch">vboxdrv-4.1.0-shutdown-suspend-fix</a>        (747 bytes,        text/plain)      </li></ul>    <p>Solution provided in upstream.</p><p>Attaching fixing patch:</p><p>sudo -i<br />service vboxdrv stop<br />wget -O /tmp/vboxhost-fix-panic.patch <a rel="nofollow" href="http://launchpad.net/..../vboxhost-fix-panic.patch">http:/launchpad.net/..../vboxhost-fix-panic.patch</a><br />cd /usr/share/virtualbox/src/vboxhost<br />patch -p1 &lt; /tmp/vboxhost-fix-panic.patch<br />dkms remove -m vboxhost -v 4.1.0 --all<br />dkms add -m vboxhost -v 4.1.0<br />dkms build -m vboxhost -v 4.1.0<br />dkms install -m vboxhost -v 4.1.0<br />service vboxdrv start</p>This is a known bug.  Head on over to <a href="https://bugs.launchpad.net/ubuntu/+source/linux/+bug/814323" rel="nofollow">https://bugs.launchpad.net/ubuntu/+source/linux/+bug/814323</a> and say it affects you too! </div>