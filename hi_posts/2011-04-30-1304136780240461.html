---
layout: post
title: BKDRhash
time: 2011-04-30 12:13
tags: 好好学习天天向上
---

<div id=content class="content mod-cs-content text-content clearfix"> #include&lt;stdio.h&gt;#include&lt;stdlib.h&gt;#include&lt;string.h&gt;#define&nbsp;inf&nbsp;13131typedef&nbsp;struct&nbsp;node&nbsp;*link;struct&nbsp;node&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;char&nbsp;rec[11];&nbsp;&nbsp;&nbsp;&nbsp;link&nbsp;ptr;};link&nbsp;str[inf];int&nbsp;BKDRhash(char&nbsp;*key){&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;int&nbsp;seed&nbsp;=&nbsp;131;&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;int&nbsp;hash&nbsp;=&nbsp;0;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(*key)&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hash&nbsp;=&nbsp;hash&nbsp;*&nbsp;seed&nbsp;+&nbsp;(*key++);&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;(hash&nbsp;&amp;&nbsp;0x7FFFFFFF)&nbsp;%&nbsp;inf;}void&nbsp;ins(char&nbsp;*key){&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;r=BKDRhash(key);&nbsp;&nbsp;&nbsp;&nbsp;link&nbsp;temp=(link)malloc(sizeof(*temp));&nbsp;&nbsp;&nbsp;&nbsp;strcpy(temp-&gt;rec,key);&nbsp;&nbsp;&nbsp;&nbsp;temp-&gt;ptr=str[r]-&gt;ptr;&nbsp;&nbsp;&nbsp;&nbsp;str[r]-&gt;ptr=temp;}int&nbsp;find(char&nbsp;*key){&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;r=BKDRhash(key);&nbsp;&nbsp;&nbsp;&nbsp;link&nbsp;temp;&nbsp;&nbsp;&nbsp;&nbsp;temp=str[r]-&gt;ptr;&nbsp;&nbsp;&nbsp;&nbsp;while(temp!=NULL)&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(!strcmp(temp-&gt;rec,key))&nbsp;return&nbsp;1;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;temp=temp-&gt;ptr;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;0;}int&nbsp;main(void){&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;n,i,m;&nbsp;&nbsp;&nbsp;&nbsp;char&nbsp;temp[11];&nbsp;&nbsp;&nbsp;&nbsp;for(i=0;i&lt;=inf-1;i++)&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str[i]=(link)malloc(sizeof(*str[i]));&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str[i]-&gt;ptr=NULL;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;scanf(&quot;%d&quot;,&amp;n);&nbsp;&nbsp;&nbsp;&nbsp;while(n--)&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scanf(&quot;%s&quot;,temp);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ins(temp);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scanf(&quot;%d&quot;,&amp;m);&nbsp;&nbsp;&nbsp;&nbsp;while(m--)&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scanf(&quot;%s&quot;,temp);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf(&quot;%s\n&quot;,find(temp)?&quot;YES&quot;:&quot;NO&quot;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;0;} </div>